@page "/calendar"
@using StudySprout.DatabaseData
@inject StudyCalendarEdit CalendarService

<h1>ðŸŒ± Study Sprout Calendar</h1>
<h3>March 2021</h3>

<div class="calendar">
    <div class="day-labels">
        <div>Sun</div><div>Mon</div><div>Tue</div>
        <div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    </div>

    <div class="days">
        <div class="day blank"></div>
        <div class="day blank"></div>

        @foreach (var day in Enumerable.Range(1, 31))
        {
            var date = new DateTime(2021, 3, day);
            var events = CalendarService.GetAllTimes().Where(e => e.StartDate.Date == date.Date).ToList();

            <div class="day">
                <strong>@day</strong>
                @foreach (var ev in events)
                {
                    <div class="event">@ev.Title</div>
                }
            </div>
        }
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        if (!CalendarService.GetAllTimes().Any())
        {
            CalendarService.AddSampleData();
        }
    }
}
